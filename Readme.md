# Ltc monitor
The ltc-monitor application is designed to access the functions of the LCT3350 High Current Supercapacitor Backup Controller and System Monitor from Analog Devices.

The ltc-monitor implements read and write functions that allow communication with the LTC3350 for configuration and reading back telemetry data. It allows monitoring of alerts generated by the device.

It was developed as a demo application for the LTC3350 hwmon [driver](https://github.com/c-facade/ltc3350-driver), which exposes the controller's registers through sysfs and handles SMBus alerts.

Capacitance and ESR values conversion depend on the resistance of the specific device, this conversion values must be taken as an example.

## Functions

### show
Print name, values, and eventual converted values of the sysfs attributes on standard output.

	ltc-monitor show

### await
Use the poll() function to await for a sysfs notification in the alarm and monitor status attributes.

	ltc-monitor await

### write
Write the value on the attribute's sysfs file. If a valid measurement unit is specified, it will convert the value in LSB units.

	ltc-monitor write cap_ov_lvl 30
	ltc-monitor write cap_ov_lvl 10 F

### read
Read from the attribute's sysfs file, and print it to standard output. If the `-c` option is set, it will try to convert the value to the appropriate measurement unit.
	
	ltc-monitor read meas_cap
	ltc-monitor read -c meas_cap

### clear
Clear all active alarms, setting the alarm register to zero. On the next measurement, if the alarm condition persists, the alarms will be activated again, and a new notification will be dispatched.

### status
Print a complete status report, that includes monitor status, active alarms, and charger status, with the values of all the exposed sysfs attributes.

## Installation
Include the ltc-monitor folder in your yocto project, and compile the `ltc-monitor` recipe. This will generate a binary file called "ltc-monitor". Copy and paste it in a executables folder (such as `/usr/bin`) of the target device.
The target device needs to have the ltc3350 driver, either as a module or as built-in.

## ltcsensors
`ltcsensors.py` is a python script that allows the user to read sensors values in real time and store them in a csv file. It's completely separate from ltc-monitor but I uploaded it to have another example of uses for the ltc3350 driver. See its [README](ltcsensors/README.md).
